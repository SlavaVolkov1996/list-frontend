<div class="entry" [style.margin-left]="marginLeft">
  <!-- Компактный заголовок -->
  <div class="entry-header">
    <!-- Кнопка раскрытия/сворачивания -->
    <button
      *ngIf="entry.entries.length > 0"
      (click)="toggleExpand()"
      class="btn-expand"
      [class.expanded]="entry.isExpanded"
      title="{{ entry.isExpanded ? 'Свернуть' : 'Развернуть' }}">
      ▶
    </button>

    <!-- Компактное поле ввода -->
    <input
      [(ngModel)]="entry.title"
      (ngModelChange)="entryChanged.emit()"
      placeholder="Название..."
      class="title-input"
      maxlength="100">

    <!-- Компактные действия -->
    <div class="entry-actions">
      <!-- Кнопка добавления -->
      <button
        (click)="addSubEntry()"
        class="btn btn-primary"
        title="Добавить подзапись">
        +
      </button>

      <!-- Кнопка удаления -->
      <button
        (click)="deleteEntry()"
        class="btn btn-danger"
        title="Удалить запись">
        ×
      </button>
    </div>
  </div>

  <!-- Вложенные записи -->
  <div
    *ngIf="entry.entries.length > 0 && entry.isExpanded"
    class="sub-entries">

    <!-- Рекурсивное отображение -->
    <div
      *ngFor="let subEntry of entry.entries"
      class="sub-entry-wrapper">

      <app-entry
        [entry]="subEntry"
        [depth]="depth + 1"
        (entryChanged)="onSubEntryChanged()"
        (entryDeleted)="onSubEntryDeleted($event)">
      </app-entry>
    </div>
  </div>
</div>