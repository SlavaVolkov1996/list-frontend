<div class="entry" [style.margin-left]="marginLeft">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–ø–∏—Å–∏ -->
  <div class="entry-header">
    <!-- –ö–Ω–æ–ø–∫–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è -->
    <button
      *ngIf="entry.entries.length > 0"
      (click)="toggleExpand()"
      class="btn-expand"
      [class.expanded]="entry.isExpanded"
      title="{{ entry.isExpanded ? '–°–≤–µ—Ä–Ω—É—Ç—å' : '–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å' }}">
      ‚ñ∂
    </button>

    <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏—è -->
    <input
      [(ngModel)]="entry.title"
      (ngModelChange)="entryChanged.emit()"
      placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ..."
      class="title-input"
      maxlength="200">

    <!-- –î–µ–π—Å—Ç–≤–∏—è -->
    <div class="entry-actions">
      <!-- –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–∑–∞–ø–∏—Å–∏ - –í–°–ï–ì–î–ê –í–ò–î–ò–ú–ê -->
      <button
        (click)="addSubEntry()"
        class="btn btn-primary"
        title="–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∑–∞–ø–∏—Å—å">
        ‚ûï –í–ª–æ–∂–∏—Ç—å
      </button>

      <!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è -->
      <button
        (click)="deleteEntry()"
        class="btn btn-danger"
        title="–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å">
        üóëÔ∏è
      </button>

      <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ -->
      <span class="depth-badge" *ngIf="depth > 0">
        –£—Ä–æ–≤–µ–Ω—å {{ depth }}
      </span>
    </div>
  </div>

  <!-- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ -->
  <div
    *ngIf="entry.entries.length > 0 && entry.isExpanded"
    class="sub-entries">

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–∑–∞–ø–∏—Å–µ–π -->
    <div class="sub-entries-info">
      <span class="sub-count">
        üìÅ –ü–æ–¥–∑–∞–ø–∏—Å–µ–π: {{ entry.entries.length }}
        <span>(–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ)</span>
      </span>
    </div>

    <!-- –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–¥–∑–∞–ø–∏—Å–µ–π -->
    <div
      *ngFor="let subEntry of entry.entries"
      class="sub-entry-wrapper">

      <app-entry
        [entry]="subEntry"
        [depth]="depth + 1"
        (entryChanged)="onSubEntryChanged()"
        (entryDeleted)="onSubEntryDeleted($event)">
      </app-entry>
    </div>
  </div>

  <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ—Ç –ø–æ–¥–∑–∞–ø–∏—Å–µ–π -->
  <div
    *ngIf="entry.entries.length === 0 && entry.isExpanded"
    class="no-sub-entries">
    <p>–ù–µ—Ç –ø–æ–¥–∑–∞–ø–∏—Å–µ–π</p>
    <button
      (click)="addSubEntry()"
      class="btn btn-secondary">
      ‚ûï –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –ø–æ–¥–∑–∞–ø–∏—Å—å
    </button>
  </div>
</div>