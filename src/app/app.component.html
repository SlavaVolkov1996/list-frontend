<div class="container">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
  <header class="app-header">
    <h1>üìù –£–ª—É—á—à–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h1>
    <p class="subtitle">–° —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</p>

    <!-- –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ -->
    <div class="help-tip">
      üí° –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π —Ç–µ–ø–µ—Ä—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º –∏ —Ñ–∞–π–ª–∞–º–∏
    </div>

    <div class="controls">
      <button (click)="addEntry()" class="btn btn-primary" [disabled]="loading">
        + –î–æ–±–∞–≤–∏—Ç—å
      </button>
      <button (click)="saveEntries()" class="btn btn-success" [disabled]="loading">
        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
      </button>
      <button (click)="loadEntries()" class="btn btn-secondary" [disabled]="loading">
        üîÑ –ó–∞–≥—Ä—É–∑–∏—Ç—å
      </button>
      <button (click)="removeEmpty()" class="btn btn-warning" [disabled]="loading">
        üßπ –û—á–∏—Å—Ç–∏—Ç—å –ø—É—Å—Ç—ã–µ
      </button>
      <!-- –ù–û–í–ê–Ø –ö–ù–û–ü–ö–ê: –û—á–∏—Å—Ç–∫–∞ orphaned —Ñ–∞–π–ª–æ–≤ -->
      <button (click)="cleanupOrphaned()" class="btn btn-info" [disabled]="loading">
        üóÇÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ñ–∞–π–ª—ã
      </button>
      <button (click)="confirmClearAll()" class="btn btn-danger" [disabled]="loading">
        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—Å–µ
      </button>
    </div>
  </header>

  <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
  <div *ngIf="error" class="message error">
    ‚ùå {{ error }}
    <button (click)="error = null" class="close-btn">√ó</button>
  </div>

  <div *ngIf="successMessage" class="message success">
    {{ successMessage }}
    <button (click)="successMessage = null" class="close-btn">√ó</button>
  </div>

  <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <span>–ó–∞–≥—Ä—É–∑–∫–∞...</span>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–∏—Å–æ–∫ -->
  <div class="entries-container">
    <div *ngIf="entries.length === 0 && !loading" class="empty-state">
      <h3>üì≠ –°–ø–∏—Å–æ–∫ –ø—É—Å—Ç</h3>
      <p>–ù–∞—á–Ω–∏—Ç–µ —Å —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏</p>
      <button (click)="addEntry()" class="btn btn-primary">
        + –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å
      </button>
    </div>

    <!-- –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π -->
    <div *ngFor="let entry of entries" class="root-entry">
      <app-entry
        [entry]="entry"
        [depth]="0"
        (entryChanged)="onEntriesChange()"
        (entryDeleted)="removeEntry($event)">
      </app-entry>
    </div>
  </div>

  <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
  <footer class="app-footer">
    <div class="stats-panel">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number">{{ countTotalEntries(entries) }}</div>
          <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">{{ getMaxDepth(entries) }}</div>
          <div class="stat-label">–£—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">{{ entries.length }}</div>
          <div class="stat-label">–ö–æ—Ä–Ω–µ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π</div>
        </div>
      </div>
    </div>
  </footer>
</div>