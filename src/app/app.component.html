<div class="container">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
  <header class="app-header">
    <h1>üå≥ –î—Ä–µ–≤–æ–≤–∏–¥–Ω—ã–π –°–ø–∏—Å–æ–∫ –ó–∞–¥–∞—á</h1>
    <p class="subtitle">–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ</p>

    <div class="controls">
      <button (click)="addEntry()" class="btn btn-primary" [disabled]="loading">
        üå± –î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–Ω–µ–≤—É—é –∑–∞–ø–∏—Å—å
      </button>
      <button (click)="saveEntries()" class="btn btn-success" [disabled]="loading">
        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ
      </button>
      <button (click)="loadEntries()" class="btn btn-secondary" [disabled]="loading">
        üîÑ –û–±–Ω–æ–≤–∏—Ç—å
      </button>
      <button (click)="loadSampleData()" class="btn btn-info" [disabled]="loading">
        üìã –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
      </button>
      <button (click)="exportStructure()" class="btn btn-warning">
        üìä –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
      </button>
    </div>
  </header>

  <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
  <div *ngIf="error" class="message error">
    ‚ùå {{ error }}
    <button (click)="error = null" class="close-btn">√ó</button>
  </div>

  <div *ngIf="successMessage" class="message success"
       [class.warning]="successMessage.includes('‚ö†Ô∏è')">
    {{ successMessage }}
    <button (click)="successMessage = null" class="close-btn">√ó</button>
  </div>

  <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <span>–ó–∞–≥—Ä—É–∑–∫–∞ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã...</span>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–∏—Å–æ–∫ -->
  <div class="entries-container">
    <div *ngIf="entries.length === 0 && !loading" class="empty-state">
      <h3>üå≤ –î–µ—Ä–µ–≤–æ –∑–∞–¥–∞—á –ø—É—Å—Ç–æ</h3>
      <p>–°–æ–∑–¥–∞–π—Ç–µ –∫–æ—Ä–Ω–µ–≤—É—é –∑–∞–ø–∏—Å—å —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É</p>
      <button (click)="addEntry()" class="btn btn-primary">
        üå± –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å
      </button>
    </div>

    <!-- –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π -->
    <div *ngFor="let entry of entries" class="root-entry">
      <app-entry
        [entry]="entry"
        [depth]="0"
        [maxDepth]="maxDepth"
        (entryChanged)="onEntriesChange()"
        (entryDeleted)="removeEntry($event)">
      </app-entry>
    </div>
  </div>

  <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
  <footer class="app-footer">
    <div class="stats">
      <div class="stat-item">
        <strong>–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π:</strong> {{ countTotalEntries(entries) }}
      </div>
      <div class="stat-item">
        <strong>–ì–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏:</strong> {{ getMaxDepth(entries) }}/{{ maxDepth }}
      </div>
      <div class="stat-item">
        <strong>–ö–æ—Ä–Ω–µ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π:</strong> {{ entries.length }}
      </div>
    </div>

    <div class="depth-info">
      üí° <strong>–°–æ–≤–µ—Ç:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "‚ûï –í–ª–æ–∂–∏—Ç—å" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–∑–∞–¥–∞—á –ª—é–±–æ–π –≥–ª—É–±–∏–Ω—ã
    </div>
  </footer>
</div>